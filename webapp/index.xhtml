<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:o="http://omnifaces.org/ui"
>

<h:head>
    <title>WebSockets demo</title>
    <h:outputScript name="script.js" library="scripts"/>
</h:head>

<h:body>
  <f:websocket
          id="simpleChannel"
          channel="simpleChannel"
          onopen="console.log ('open simpleChannel')"
          onclose="console.log ('close simpleChannel')"
          onmessage="onMessage" />

  <f:websocket
          id="futureChannel"
          channel="futureChannel"
          onopen="console.log ('open futureChannel')"
          onclose="console.log ('close futureChannel')"
          onmessage="onMessage" />



  <o:socket
          id="omniSimpleChannel"
          channel="omniSimpleChannel"
          onopen="console.log ('open omniSimpleChannel')"
          onclose="console.log ('close omniSimpleChannel')"
          onmessage="onMessage" />

  <o:socket
          id="omniFutureChannel"
          channel="omniFutureChannel"
          onopen="console.log ('open omniFutureChannel')"
          onclose="console.log ('close omniFutureChannel')"
          onmessage="onMessage" />

  <h:form id="simpleForm">


    <h:commandButton id="simpleChannelPush" value="myfaces simple push" action="#{testBean.simplePush('WEB')}">
      <f:ajax />
    </h:commandButton>
    <br />

    <h:commandButton id="futurePush" value="myfaces future push" action="#{testBean.futurePush('WEB')}">
      <f:ajax />
    </h:commandButton>
    <br />

    <h:commandButton id="omniSmpleChannelPush" value="omni simple push" action="#{testBean.omniSimplePush('WEB')}">
      <f:ajax />
    </h:commandButton>
    <br />

    <h:commandButton id="omniFuturePush" value="omni future push" action="#{testBean.omniFuturePush('WEB')}">
      <f:ajax />
    </h:commandButton>
    <br /><br />

    Channel for scheduler:

    <h:selectOneMenu id="selectChannelForScheduler" value="#{schedulerBean.schedulerChannelType}">
        <f:selectItem itemValue="SIMPLE" itemLabel="myfaces simple"/>
        <f:selectItem itemValue="FUTURE" itemLabel="myfaces future"/>
        <f:selectItem itemValue="OMNISIMPLE" itemLabel="omni simple" />
        <f:selectItem itemValue="OMNIFUTURE" itemLabel="omni future"/>
        <f:ajax />
    </h:selectOneMenu>

    <br /><br />
    OUTPUT:
    <h:outputText id="simpleChannelOutput" value="test" />

  </h:form>

</h:body>
</html>

